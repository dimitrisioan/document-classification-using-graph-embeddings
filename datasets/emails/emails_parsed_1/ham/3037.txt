subject
spread
option
code
change
zhiyang
and
zhiyun
vince
told
me
that
london
has
some
trouble
to
calculate
spread
option
for
correl
voll
vol
in
such
a
case
the
effective
volatility
becomes
zero
and
the
option
has
zero
time
value
i
have
modified
the
unitcorrpremium
routine
to
force
the
code
to
treat
this
situation
as
a
special
case
it
returns
the
discounted
intrinsic
value
please
incorporate
this
chang
to
your
code
so
that
it
will
no
longer
cause
any
problems
that
should
not
happen
in
the
first
place
if
you
have
any
questions
please
let
me
know
zimin
double
unitcorrpremium
double
sl
double
s
double
strike
double
r
double
ql
double
q
double
voll
double
vol
double
correl
double
tmat
int
opttype
double
retval
if
tmat
return
intrinsic
sl
s
strike
opttype
look
right
here
for
the
change
only
two
lines
if
correl
tiny
setup
sl
s
strike
r
ql
q
voll
vol
correl
tmat
if
opttype
retval
s
disc
gauherint
ffuncoc
sqrtpi
else
retval
s
disc
gauherint
ffuncop
sqrtpi
return
retval
