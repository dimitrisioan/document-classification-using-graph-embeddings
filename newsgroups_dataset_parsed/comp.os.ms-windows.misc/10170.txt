RE
WHAT
DOES
THE
BMP
FORMAT
MEAN
IN
ARTICLE
ANDREW
L
ROBERTS
WRITES
WHAT
EXACTLY
DOES
THE
WINDOWS
BITMAP
FORMAT
LOOK
LIKE
I
MEAN
HOW
IS
THE
DATA
STORED
WIDTH
HEIGHT
NO
OF
COLOURS
BITMAP
DATA
I
COULDNT
FIND
ANYTHING
IN
THS
USER
MANUAL
IS
THERE
ANY
OTHER
REFERENCE
MATERIAL
WHICH
WOULD
GIVE
ME
THIS
INFORMATION
FROM
THOMASSUNSHINEKODAKCOM
THOMAS
KINSMAN
NEWSGROUPS
COMPOSMSWINDOWSPROGRAMMERMISCALTBINARIESPICTURESUTILITIES
SUBJECT
DIBBMP
CREATION
GUIDE
AS
REQUESTED
KEYWORDS
DIB
BMP
BITMAPS
FILE
FORMATS
MESSAGEID
DATE
DEC
GMT
SENDER
NEWSKODAKKODAKCOM
ORGANIZATION
PRECAMBIRAN
ELECTRONICS
ROCHESTER
NY
LINES
XREF
CRADLETITECH
GUIDE
TO
CREATION
OF
DIB
IMAGES
THOMAS
B
KINSMAN
PRECAMBRIAN
ELECTRONICS
FALSTAFF
RD
ROCHESTER
NY
THOMASKKODAKCOM
COPYRIGHT
MARCH
ABSTRACT
THE
FORMAT
OF
IMAGES
CREATED
FOR
USE
BY
MS
WINDOWS
APPLICATIONS
IS
DOCUMENTED
IN
THE
MS
WINDOWS
PROGRAMMERS
REFERENCE
GUIDE
THIS
GUIDE
IS
INTENDED
AS
A
CLEARIFY
SOME
WORDING
OF
THE
SPECIFICATIONS
AND
TO
PUT
FORTH
A
RECOMMENDATION
AMONG
THE
VARIOUS
ALTERNATIVES
PLEASE
SEND
UPDATESCORRECTIONSSUGGESTIONS
AND
REVISIONS
TO
ME
PLEASE
THANK
ME
FOR
WRITING
THIS
ON
MY
OWN
TIME
BY
KEEPING
MY
NAME
WITH
THE
DOCUMENT
THANK
YOU
FOR
YOUR
RESPECT
THIS
DOCUMENT
COPYRIGHT
BY
THOMAS
B
KINSMAN
IF
DESIRED
A
POSTSCRIPT
VERSION
OF
THIS
DOCUMENT
IS
AVAILABLE
THIS
INFORMATION
IS
FREE
YOU
GET
MORE
THAN
WHAT
YOU
PAY
FOR
DONT
SUE
ME
IF
IM
WRONG
OVERVIEW
THE
DIB
IMAGE
FILE
FORMAT
IS
INTENDED
TO
BE
A
DEVICE
INDEPENDENT
BITMAP
FILE
FORMAT
WHAT
MICROSOFT
MEANS
BY
DEVICE
INDEPENDENT
IS
UNCLEAR
TO
ME
FOUR
PIXEL
RESOLUTIONS
ARE
SUPPORTED
BIT
BIT
BIT
AND
BIT
PIXELS
THESE
IMAGES
WERE
INTENDED
FOR
USE
ON
DOS
IBM
OR
LITTLEENDIAN
SYSTEMS
IF
YOU
ARE
CREATING
THEM
ON
ANOTHER
ARCHITECTURE
YOU
WILL
HAVE
TO
BYTE
SWAP
ALL
SHORT
AND
LONG
INTEGER
VALUES
BY
CONVENTION
DIB
IMAGES
END
IN
THE
EXTENSION
BMP
THIS
IS
BECAUSE
MARCH
THEY
ARE
A
SUPERSET
OF
EARLIER
BITMAP
IMAGE
FILES
CONSEQUENTLY
YOU
WILL
SOMETIMES
HEAR
DIB
FILES
REFERRED
TO
AS
BMP
FILES
SINCE
DIB
IMAGES
FILES
ARE
A
SUPERSET
THERE
ARE
THREE
FLAVORS
OF
DIB
IMAGES
O
DOS
DIB
IMAGES
THESE
ARE
THE
RECOMMENDED
CONVENTION
AND
THE
FORM
WHICH
I
WILL
DESCRIBE
HOW
TO
CREATE
THEY
ARE
INTENDED
FOR
APPLICATIONS
RUNNING
UNDER
MS
WINDOWS
IN
A
DOS
ENVIRONMENT
O
DIB
IMAGES
MY
UNDERSTANDING
IS
THAT
THESE
ARE
THE
FLAVOR
OF
DIB
IMAGES
THAT
WERE
USED
BY
THE
PRESENTATION
MANAGER
O
OLDSTYLE
BITMAP
IMAGES
MARCH
DIFFERENCES
BETWEEN
FLAVORS
THE
DOS
DIB
IMAGES
CONSIST
OF
A
BITMAPFILEHEADER
FILE
HEADER
WHICH
IDENTIFIES
THE
FILE
AS
A
DIB
FILE
THIS
HEADER
ALSO
GIVES
THE
TOTAL
SIZE
OF
THE
IMAGE
FILE
AND
THE
OFFSET
TO
THE
IMAGE
DATA
A
BITMAPINFOHEADER
IMAGE
HEADER
WHICH
SPECIFIES
THE
IMAGE
ATTRIBUTES
AN
OPTIONAL
PALETTE
OF
COLORS
USED
BY
THE
IMAGE
IF
IT
EXISTS
THIS
MAY
CONTAIN
OR
ENTRIES
EACH
ENTRY
IS
A
WINDOWS
RGBQUAD
STRUCTURE
THE
IMAGE
DATA
ITSELF
THE
DIB
IMAGES
CONSIST
OF
THE
SAME
BITMAPFILEHEADER
FILE
HEADER
WHICH
IDENTIFIES
THE
FILE
AS
A
DIB
FILE
THIS
HEADER
ALSO
GIVES
THE
TOTAL
SIZE
OF
THE
IMAGE
FILE
AND
THE
OFFSET
TO
THE
IMAGE
DATA
A
BITMAPCOREHEADER
IMAGE
HEADER
WHICH
SPECIFIES
THE
IMAGE
ATTRIBUTES
AN
OPTIONAL
PALETTE
OF
COLORS
USED
BY
THE
IMAGE
AGAIN
IF
THIS
EXISTS
IT
MAY
CONTAIN
OR
ENTRIES
EACH
ENTRY
IS
A
WINDOWS
RGBTRIPLE
STRUCTURE
THE
IMAGE
DATA
ITSELF
THE
OLD
STYLE
IMAGE
BITMAP
CONSISTS
OF
EITHER
A
BITMAPINFOHEADER
OR
A
BITMAPCOREHEADER
WHICH
HEADER
TYPE
IS
DETERMINED
BY
THE
FIRST
LONG
INTEGER
DWORD
VALUE
AN
OPTIONAL
COLOR
PALETTE
THIS
PALETTE
MAY
BE
COMPOSED
OF
EITHER
WINDOWS
RGBQUAD
STRUCTURES
IF
THE
HEADER
WAS
A
BITMAPINFOHEADER
OR
WINDOWS
RGBTRIPLE
STRUCTURES
IF
THE
HEADER
WAS
A
BITMAPCOREHEADER
THE
IMAGE
DATA
ITSELF
CREATING
DIB
IMAGE
FILES
CREATING
A
DOS
DIB
IMAGE
FILE
CONSISTS
OF
SEVERAL
STRAIGHT
FORWARD
STEPS
THE
HEADERS
NEED
TO
BE
CREATED
AND
THEN
WRITTEN
TO
THE
FILE
THESE
HEADER
STRUCTURES
ARE
DEFINED
IN
THE
MS
WINDOWSH
INCLUDE
FILE
PALETTE
INFORMATION
NEEDS
TO
BE
STORED
FOR
IMAGES
THAT
ARE
NOT
IMAGES
THE
FIVE
GENERAL
STEPS
ARE
FILLING
IN
THE
BITMAPFILEHEADER
AND
THE
BITMAPINFOHEADER
STRUCTURES
THE
BASIC
IMAGE
INFORMATION
IF
THE
IMAGE
IS
A
OR
AN
IMAGE
CREATING
THE
COLOR
PALETTE
OF
RGBQUADS
CALCULATING
THE
TOTAL
FILE
SIZE
AND
PUTTING
THIS
INFORMATION
IN
MARCH
THE
BFSIZE
FIELD
OF
THE
BITMAPFILEHEADER
CALCULATING
THE
OFFSET
TO
THE
IMAGE
DATA
FROM
THE
START
OF
THE
FILE
AND
PUTTING
THIS
IN
THE
BFOFFBITS
FIELD
OF
THE
BITMAPFILEHEADER
WRITING
TO
THE
FILE
THE
BITMAPFILEHEADER
THE
BITMAPINFOHEADER
THE
COLOR
PALETTE
AND
THE
IMAGE
DATA
IN
THAT
ORDER
THE
FOLLOWING
SECTIONS
DESCRIBE
STRUCTURES
IN
TERMS
OF
MICROSOFT
C
TYPE
DEFINED
KEYWORDS
THE
FOLLOWING
TABLE
DESCRIBES
THESE
KEYWORDS
FOR
THOSE
NOT
FAMILIAR
WITH
MICROSOFT
C
TYPEDEFINED
KEYWORDS
IN
MICROSOFT
C
TYPEDEF
MEANING
BYTE
UNSIGNED
CHARACTER
WORD
TWO
BYTE
UNSIGNED
INTEGER
DWORD
FOUR
BYTE
UNSIGNED
INTEGER
MARCH
THE
BITMAPFILEHEADER
THIS
STRUCTURE
IS
DEFINED
IN
WINDOWSH
AS
TYPEDEF
STRUCT
TAGBITMAPFILEHEADER
WORD
BFTYPE
DWORD
BFSIZE
WORD
WORD
DWORD
BFOFFBITS
BITMAPFILEHEADER
THE
BFTYPE
FIELD
IS
THE
TWO
ASCII
CHARACTERS
B
AND
M
THIS
SERVES
TO
IDENTIFY
THE
FILE
AS
A
DIB
IMAGE
FILE
ON
AN
INTEL
BYTE
ORDERED
MACHINE
IBM
OR
A
COMPATIBLE
THIS
CONSTANT
CAN
BE
FORMED
IN
C
AS
THE
QUANTITY
M
B
ON
AN
INTEL
SYSTEM
THE
BFSIZE
FIELD
IS
THE
TOTAL
SIZE
OF
THE
FILE
FOR
OUR
PURPOSES
THIS
FIELD
IS
EQUAL
TO
THE
SIZE
OF
THE
BITMAPFILEHEADER
PLUS
THE
SIZE
OF
THE
BITMAPINFOHEADER
PLUS
THE
NUMBER
OF
ENTRIES
IN
THE
COLOR
PALETTE
TIMES
THE
SIZE
OF
A
RGBQUAD
PLUS
THE
NUMBER
OF
BYTES
OF
IMAGE
DATA
IF
THE
IMAGE
DATA
IS
BEING
WRITTEN
OUT
IN
AN
UNCOMPRESSED
FORM
THIS
VALUE
CAN
BE
CALCULATED
AHEAD
OF
TIME
OTHERWISE
THIS
FIELD
NEEDS
TO
BE
FILLED
IN
LATER
BOTH
THE
AND
THE
FIELDS
ARE
ALWAYS
SET
TO
ZERO
THE
BFOFFBITS
FIELD
IS
SET
TO
THE
OFFSET
TO
THE
START
OF
THE
IMAGE
DATA
FROM
THE
START
OF
THE
FILE
FOR
OUR
PURPOSES
THIS
FIELD
SHOULD
BE
SET
TO
THE
SIZE
OF
THE
BITMAPFILEHEADER
PLUS
THE
SIZE
OF
THE
BITMAPINFOHEADER
PLUS
THE
NUMBER
OF
ENTRIES
IN
THE
COLOR
PALETTE
TIMES
THE
SIZE
OF
A
RGBQUAD
THIS
WORKS
OUT
BECAUSE
THE
IMAGE
DATA
IS
WRITTEN
WRITE
AFTER
THE
COLOR
PALETTE
IF
ONE
EXISTS
MARCH
THE
BITMAPINFOHEADER
THIS
STRUCTURE
IS
DEFINED
IN
WINDOWSH
AS
TYPEDEF
STRUCT
TAGBITMAPINFOHEADER
DWORD
BISIZE
DWORD
BIWIDTH
DWORD
BIHEIGHT
WORD
BIPLANES
WORD
BIBITCOUNT
DWORD
BICOMPRESSION
DWORD
BISIZEIMAGE
DWORD
BIXPELSPERMETER
DWORD
BIYPELSPERMETER
DWORD
BICLRUSED
DWORD
BICLRIMPORTANT
BITMAPINFOHEADER
THE
BISIZE
FIELD
IS
SET
TO
THE
SIZE
OF
THE
BITMAPINFOHEADER
STRUCTURE
ITSELF
WHEN
READING
THE
IMAGE
FILE
THIS
VALUE
IS
WHAT
IS
USED
TO
DETERMINE
THAT
THE
IMAGE
CONTAINS
A
BITMAPINFOHEADER
AND
NOT
A
BITMAPCOREHEADER
THE
BIWIDTH
FIELD
IS
THE
WIDTH
OF
THE
IMAGE
IN
IMAGE
PIXELS
THE
BIHEIGHT
FIELD
IS
THE
HEIGHT
OF
THE
IMAGE
IN
IMAGE
LINES
THE
BIPLANES
FIELD
SHOULD
ALWAYS
BE
SET
TO
THIS
DATA
IS
WRITTEN
OUT
AS
IF
THERE
WAS
ONE
COLOR
PLANE
THE
BIBITCOUNT
FIELD
IS
THE
BITDEPTH
OF
THE
IMAGE
THIS
MUST
BE
EITHER
OR
DEPENDING
ON
THE
BITDEPTH
OF
THE
IMAGE
DATA
THE
BICOMPRESSION
FIELD
TELLS
HOW
THE
IMAGE
DATA
IS
COMPRESSED
IF
IT
IS
COMPRESSED
DIB
IMAGES
SUPPORT
TWO
FORMS
OF
RUNLENGTH
ENCODING
HOWEVER
I
HAVE
NEVER
SEEN
ANY
IMAGES
WHICH
USE
IT
AND
DONT
KNOW
YET
HOW
IT
WORKS
SET
THIS
FIELD
TO
ZERO
LONG
ZERO
OR
TO
INDICATE
THAT
THE
DATA
IS
NOT
COMPRESSED
ALL
SUBSEQUENT
FIELDS
OF
THE
BITMAPINFOHEADER
STRUCTURE
MAY
BE
SET
TO
ZERO
A
REQUIREMENT
OF
THE
INTERPRETTING
SOFTWARE
THAT
IT
BE
ABLE
TO
COMPUTE
THESE
FIELDS
AS
NECESSARY
FROM
THE
PREVIOUS
INFORMATION
THE
FIELD
WHICH
YOU
MIGHT
WANT
TO
EXPLICITLY
SPECIFY
MIGHT
BE
BICLRUSED
FOR
AND
IMAGES
THIS
FIELD
INDICATES
THAT
NOT
ALL
OF
THE
POSSIBLE
COLOR
ENTRIES
ARE
USED
AND
THAT
THE
IMAGE
CONTAINS
BICLRUSED
COLORS
IF
YOU
ARE
USING
ONLY
COLORS
WITH
AN
IMAGE
THEN
YOU
MAY
ONLY
WANT
TO
SAVE
OF
THE
POSSIBLE
PALETTE
ENTRIES
GENERALLY
SET
THIS
FIELD
TO
ZERO
MARCH
COLOR
PALETTES
EACH
ENTRY
OF
A
COLOR
PALETTE
IS
A
RGBQUAD
STRUCTURE
THE
RGBQUAD
STRUCTURE
IS
DEFINED
IN
THE
WINDOWSH
INCLUDE
FILE
AS
TYPEDEF
STRUCT
TAGRGBQUAD
BYTE
RGBBLUE
BYTE
RGBGREEN
BYTE
RGBRED
BYTE
RGBRESERVED
RGBQUAD
THE
RGBRESERVED
FIELD
IS
ALWAYS
ZERO
FOR
EACH
COLOR
USED
THE
AMOUNT
OF
BLUE
GREEN
AND
RED
ARE
FILLED
INTO
THE
STRUCTURE
AND
THE
STRUCTURE
IS
WRITTEN
TO
THE
FILE
A
VALUE
OF
ZERO
IN
THE
RGBBLUE
RGBGREEN
OR
RGBRED
FIELDS
INDICATES
THAT
THAT
PARTICULAR
COMPONENT
DOES
NOT
CONTRIBUTE
TO
THE
COLOR
COMPOSITION
A
VALUE
OF
IN
ANY
OF
THESE
FIELDS
INDICATES
THAT
THE
COMPONENT
CONTRIBUTES
FULLY
TO
THE
COLOR
COMPOSITION
IMAGE
DATA
THERE
ARE
THREE
SURPRISES
ABOUT
THE
ORDERING
OF
IMAGE
DATA
IN
DIB
IMAGE
FILE
THE
CREATOR
OF
THIS
FORMAT
WAS
DETERMINED
TO
BE
CREATIVE
AND
CERTAINLY
WAS
WITHIN
THE
IMAGE
DATA
EACH
LINE
WRITTEN
OUT
IS
PADDED
TO
THE
NEXT
FOUR
BYTE
QUANTITY
SO
IF
YOU
HAD
AN
IMAGE
WHICH
WAS
ONLY
ONE
PIXEL
WIDE
YOU
STILL
HAVE
TO
WRITE
OUT
FOUR
BYTES
FOR
EVERY
IMAGE
LINE
THE
NUMBER
OF
BYTES
PER
LINE
CAN
BE
CALCULATED
AS
BYTESPERLINE
WIDTHINPIX
BITDEPTH
OR
IN
TERMS
OF
THE
FIELDS
OF
THE
BITMAPINFOHEADER
STRUCTURE
BYTESPERLINE
BIWIDTH
BIBITCOUNT
WHEN
WRITING
OUT
YOUR
IMAGE
DATA
YOU
MUST
WRITE
IT
OUT
BOTTOM
LINE
FIRST
THE
BOTTOM
LINE
OF
THE
IMAGE
AS
YOU
WOULD
LOOK
AT
IT
ON
THE
SCREEN
IS
THE
FIRST
LINE
OF
IMAGE
DATA
IN
THE
FILE
FOR
AND
IMAGES
INFORMATION
IS
WRITTEN
AS
YOU
WOULD
EXPECT
ONE
BIT
IMAGES
ARE
PADDED
EIGHT
PIXELS
TO
A
BYTE
FOUR
BIT
IMAGES
ARE
PADDED
TWO
PIXELS
TO
A
BYTE
EIGHT
BIT
IMAGES
ARE
WRITTEN
ONE
PIXEL
PER
BYTE
TWENTYFOUR
BIT
IMAGES
ARE
WRITTEN
THREE
BYTES
PER
PIXEL
HOWEVER
FOR
IMAGES
THE
INFORMATION
MUST
BE
WRITTEN
OUT
IN
THE
ORDER
BLUE
GREEN
RED
WHILE
MOST
IMAGE
FILE
FORMATS
WRITE
DATA
OUT
IN
MARCH
AN
RGB
ORDERING
A
DIB
IMAGE
FILE
WRITES
THE
DATA
OUT
IN
AN
BGR
ORDERING
SUMMARY
THIS
SHOULD
PROVIDE
ENOUGH
INFORMATION
TO
CREATE
DIB
IMAGES
FROM
APPLICATIONS
SUCH
AS
SCANNERS
OR
FOR
IMAGE
EXPORTING
ROUTINES
IF
YOU
FIND
OUT
ANY
MORE
ABOUT
DIB
IMAGES
PLEASE
PASS
THE
INFORMATION
ON
TO
ME
SO
THAT
I
CAN
MODIFY
THIS
DOCUMENT
ACCORDINGLY
MARCH
THOMAS
B
KINSMAN
ROCHESTER
NY
THOMASACADIAKODAKCOM
PRACTICE
RANDOM
KINDNESS
AND
SENSELESS
ACTS
OF
BEAUTY
ANON
ITO
TAKAYUKI
YUKIISSUTOKYOACJP
SENIOR
DEPARTMENT
OF
INFOMATION
SCIENCE
FACULTY
OF
SCIENCE
UNIVERSITY
OF
TOKYO
JAPAN
