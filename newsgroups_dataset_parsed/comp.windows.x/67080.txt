RE
MONTHLY
QUESTION
ABOUT
XCOPYAREA
AND
EXPOSE
EVENTS
IN
ARTICLE
BUZZBEARCOM
BUZZ
MOSCHETTI
WRITES
POSTING
OF
THE
QUESTION
THAT
JUST
DOESNT
SEEM
TO
GET
ANSWERED
SUPPOSE
YOU
HAVE
AN
IDLE
APP
WITH
A
REALIZED
AND
MAPPED
WINDOW
THAT
CONTAINS
XLIB
GRAPHICS
A
BUTTON
WIDGET
WHEN
PRESSED
WILL
CAUSE
A
NEW
ITEM
TO
BE
DRAWN
IN
THE
WINDOW
THIS
ACTION
CLEARLY
SHOULD
NOT
CALL
XCOPYAREA
OR
EQUIV
DIRECTLY
INSTEAD
IT
SHOULD
REGISTER
THE
EXISTENCE
OF
THE
NEW
ITEM
IN
A
MEMORY
STRUCTURE
AND
LET
THE
SAME
EXPOSE
EVENT
HANDLER
THAT
HANDLES
REGULAR
EXPOSE
EVENTS
EG
WINDOW
MANAGERDRIVEN
EXPOSURES
TAKE
CARE
OF
RENDERING
THE
NEW
IMAGE
USING
AN
EXPOSE
EVENT
HANDLER
IS
A
PROPER
WAY
TO
DO
THIS
BECAUSE
AT
THE
TIME
THE
HANDLER
IS
CALLED
THE
XLIB
WINDOW
IS
GUARANTEED
TO
BE
MAPPED
THE
PROBLEM
OF
COURSE
IS
THAT
NO
EXPOSE
EVENT
IS
GENERATED
IF
THE
WINDOW
IS
ALREADY
VISIBLE
AND
MAPPED
WHAT
WE
NEED
TO
DO
IS
SOMEHOW
TICKLE
THE
WINDOW
SO
THAT
THE
EXPOSE
HANDLER
IS
HIT
WITH
ARGUMENTS
THAT
WILL
ENABLE
IT
TO
RENDER
JUST
THE
PART
OF
THE
WINDOW
THAT
CONTAINS
THE
NEW
ITEM
WHAT
IS
THE
BEST
WAY
TO
TICKLE
A
WINDOW
TO
PRODUCE
THIS
BEHAVIOR
TO
INCREMENTALLY
UPDATE
THE
CONTENTS
OF
WINDOWS
I
USE
THE
FOLLOWING
TRICK
SET
THE
WINDOW
BACKGROUND
TO
NONE
CALL
XCLEARAREADISPLAY
WINDOW
TRUE
RESTORE
THE
WINDOW
BACKGROUND
TO
ITS
CORRECT
VALUE
THE
CALL
TO
XCLEARAREA
DOES
NOT
REPAINT
THE
WINDOW
BACKGROUND
BUT
STILL
GENERATES
EXPOSURE
EVENTS
FOR
VISIBLE
PARTS
OF
THE
WINDOW
IN
ORDER
TO
LET
MY
APPLICATION
KNOW
THAT
THESE
EXPOSE
EVENTS
MUST
BE
HANDLED
INCREMENTALLY
SOMETHING
IS
ALREADY
DISPLAYED
ON
THE
SCREEN
AND
MAY
NEED
TO
BE
ERASED
I
ENCAPSULATE
THE
OPERATIONS
WITH
SELF
ADDRESSED
CLIENT
MESSAGES
WHICH
PRESERVE
ASYNCHRONICITY
BETWEEN
THE
CLIENT
AND
THE
SERVER
XGRABSERVERDISPLAY
CLIENT
MESSAGE
STARTINCREMENTAL
BACKGROUND
NONE
XCLEARAREA
RESTORE
BACKGROUND
CLIENT
MESSAGE
ENDINCREMENTAL
XUNGRABSERVERDISPLAY
THE
GRABSERVER
PREVENTS
OTHER
EVENTS
TO
BE
INSERTED
BY
THE
SERVER
IN
THE
CRITICAL
SECTION
VINCENT
PRUNET
SEMA
GROUP
SOPHIA
ANTIPOLIS
INRIA
BP
SOPHIA
ANTIPOLIS
CEDEX
FRANCE
PRUNETSOPHIAINRIAFR
