HOW
TO
SEE
CHARACTERSET
FROM
WCHART
WE
DEVELOPED
A
TOOLKIT
RUNNING
ON
THE
X
WINDOW
SYSTEM
THE
TOOLKIT
COPES
WITH
ANY
LANGUAGES
BASED
ON
FACILITY
AS
YOU
KNOW
THERE
ARE
KINDS
OF
IMPLEMENTATION
FROM
MITS
RELEASE
XSI
AND
XIMP
OUR
ORIGINAL
IMPLEMENTATION
OF
THE
TOOLKIT
USES
XSI
OUR
TOOLKIT
MANAGES
EACH
CHARACTERS
SIZE
BASED
ON
OUR
OWN
FONT
MANAGEMENT
SYSTEM
IN
ORDER
TO
DO
THAT
THE
WCHART
TYPED
CHARACTER
STRINGS
MUST
BE
DECOMPOSED
TO
CHARACTER
SETS
THIS
MEANS
THAT
IF
ONE
WCHART
TYPE
COMPOUND
STRING
WITH
ASCII
AND
KANJI
MIXED
FOR
EXAMPLE
IS
GIVEN
EACH
ELEMENT
OF
THE
WCHART
ARRAY
MUST
BE
CHECKED
ITS
CORRESPONDING
CHARACTER
SET
BASED
ON
A
BIT
LAYOUT
AND
APPLICATION
ENVIRONMENTS
LOCALE
IN
THIS
CASE
IF
THE
LOCALE
IS
JAPANESE
EACH
WCHART
CHARACTER
WILL
BE
CLASSIFIED
EITHER
TO
OR
SO
WE
NEED
A
FUNCTION
TO
DO
THIS
THE
FUNCTION
MUST
CHECK
HOW
MANY
CHARACTERS
FROM
THE
TOP
ARE
THE
SAME
CHARACTER
SET
AND
WHAT
THE
CHARACTER
SET
IS
WE
COULD
NOT
FIND
ANY
PUBLIC
FUNCTION
TO
DO
THAT
AND
INEVITABLY
USED
XSIS
INTERNAL
FUNCTIONS
TO
CONSTRUCT
THAT
FUNCTION
THE
FOLLOWING
IS
THE
SOURCE
CODE
OF
THAT
FUNCTION
DECOMPOSECHARACTERSET
THIS
MAY
LOOK
LIKE
C
CODE
BUT
IT
IS
REALLY
C
ID
IIMA
EXP
IIMA
IFNDEF
DEFINE
INCLUDE
EXTERN
INT
DECOMPOSECHARACTERSETCONST
WCHART
WCSTR
IN
INT
WCLEN
IN
CHAR
BUF
OUT
INT
BUFLEN
INOUT
INT
SCANNEDLEN
OUT
CHAR
CHARSET
OUT
EXTERN
XMSTRING
WCHARTOXMSTRINGCONST
WCHART
WCSTR
EXTERN
XMSTRINGCHARSET
CHARSETOFWCHARCONST
WCHART
WC
ENDIF
ID
IIMA
EXP
INCLUDE
STDLIBH
INCLUDE
INCLUDE
XMXMH
INCLUDE
EXTERN
C
INCLUDE
DEFINE
XWCDECOMPOSEGLYPHCHARSET
XXXXWCDECOMPOSEGLYPHCHARSET
DEFINE
XMBFSCS
XXXXMBFSCS
DEFINE
XMBCTIDTOCSID
XXXXMBCTIDTOCSID
INCLUDE
XLOCALEINTH
UNDEF
XWCDECOMPOSEGLYPHCHARSET
UNDEF
XMBFSCS
UNDEF
XMBCTIDTOCSID
EXTERN
INT
XWCDECOMPOSEGLYPHCHARSETXLOCALE
CONST
WCHART
INT
CHAR
INT
INT
INT
EXTERN
CHARSET
XMBFSCSXLOCALE
CSID
EXTERN
CSID
XMBCTIDTOCSIDXLOCALE
CSID
INT
DECOMPOSECHARACTERSETCONST
WCHART
WCSTR
IN
INT
WCLEN
IN
CHAR
BUF
OUT
INT
BUFLEN
INOUT
INT
SCANNEDLEN
OUT
CHAR
CHARSET
OUT
XLOCALE
XLOCALE
XFALLBACKCONVERT
INT
CTID
INT
STATUS
CHARSET
XCHARSET
STATUS
XWCDECOMPOSEGLYPHCHARSETXLOCALE
WCSTR
WCLEN
BUF
BUFLEN
SCANNEDLEN
CTID
IF
STATUS
SUCCESS
XCHARSET
XMBFSCSXLOCALE
XMBCTIDTOCSIDXLOCALE
CTID
CHARSET
XCHARSET
XCHARSETCSNAME
NULL
ELSE
CHARSET
NULL
RETURN
STATUS
AN
INCLUDED
FILE
ABOVE
XLOCALEINTH
IS
ALSO
XSI
INTERNAL
AND
WE
COPIED
THE
FILE
TO
THE
TOOLKIT
DIRECTORY
AND
COMPILED
A
SERIOUS
ISSUE
OCCURED
WHEN
WE
TRIED
TO
COMPILE
A
TOOLKIT
APPLICATION
ON
OUR
HP
MACHINE
WITH
ITS
OS
VERSION
OF
WHEN
WE
TRIED
TO
LINK
AN
APPLICATION
BASED
ON
OUR
TOOLKIT
LINK
ERRORS
OCCURED
SAYING
THAT
THE
FOLLOWING
FUNCTIONS
ARE
MISSING
XMBCTIDTOCSID
CODE
XMBFSCS
CODE
XWCDECOMPOSEGLYPHCHARSET
CODE
XFALLBACKCONVERT
CODE
WE
HAD
USED
MIT
RELEASE
VERSION
OF
AND
ITS
XSI
IMPLEMENTATION
UNTIL
AND
RAN
APPLICATIONS
SUCCESSFULLY
ONE
OF
THE
REASONS
TO
USE
XSI
WAS
THAT
BECAUSE
HP
DID
NOT
RELEASE
HPS
UNTIL
THE
OS
AND
WE
HAD
NO
WAY
TO
KNOW
HOW
HPS
WOULD
BE
IMPLEMENTED
WE
HAD
HOPED
XSIS
POPULARITY
AND
USED
ITS
INTERNAL
FUNCTIONS
THE
HPS
LINKER
COMPLAINS
THAT
THERE
ARE
NO
XSI
INTERNAL
FUNCTIONS
IMPLEMENTED
WE
OBSERVE
FROM
HPS
THEY
USED
SOME
XIMP
IMPLEMENTATION
BUT
WE
ARE
NOT
SURE
IF
THEY
USED
MITS
VANILLA
XIMP
VERSION
OR
THEIR
OWN
VERSION
OF
XIMP
AND
THEREFORE
FINDING
JUST
COUNTER
PART
FUNCTIONS
IN
MITS
XIMP
FOR
XSI
DOES
NOT
SEEM
TO
LEAD
US
A
SOLUTION
MY
QUESTION
AND
GOAL
IS
TO
KNOW
HOW
WE
CAN
CONSTRUCT
A
FUNCTION
LIKE
DECOMPOSECHARACTERSET
LISTED
ABOVE
IS
THERE
ANY
FUNCTION
TO
CHECK
CHARACTER
SET
OF
EACH
ELEMENT
OF
WCHART
TYPE
STRINGS
DEPENDING
ON
LOCALES
IF
IT
IS
A
PUBLIC
FUNCTION
THAT
IS
PERFECT
BUT
EVEN
IF
IT
IS
NOT
WE
WANT
TO
USE
ANY
INTERNAL
FUNCTIONS
IN
HPS
AS
WE
DID
FOR
MITS
IN
ORDER
TO
RENDER
A
WCHART
TYPE
STRING
THERE
MUST
BE
SOME
MACHINERY
TO
JUDGE
CHARACTER
SETS
AND
THAT
IS
HOW
THE
PROPER
FONTS
ARE
SELECTED
FOR
THE
STRING
WE
HAVE
NO
WAY
TO
FIND
OUT
THAT
WITHOUT
ANY
HPS
SOURCE
FILES
WE
WANT
TO
KNOW
HOW
WE
CAN
USE
THAT
FOR
OUR
GOAL
ANY
HELP
OR
COMMENTS
WOULD
BE
HIGHLY
APPRECIATED
I
ALSO
APPRECIATE
IF
ANYONE
TELL
ME
ABOUT
XIMP
TREATING
AROUND
THIS
AREA
EVEN
IF
IT
IS
NOT
HPS
IMPLEMENTATION
THANK
YOU
TAKESHI
INOUE
INOUECRDYOKOGAWACOJP
YOKOGAWA
ELECTRIC
CORPORATION
OPEN
SYSTEMS
LABORATORY
