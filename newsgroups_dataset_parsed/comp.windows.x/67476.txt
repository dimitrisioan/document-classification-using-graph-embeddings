RE
TABLE
WIDGET
CAUSING
TROUBLE
WITH
XTQUERYGEOMETRY
I
JUST
GOT
A
BUG
REPORT
AND
A
FIX
FOR
THIS
EXACT
PROBLEM
FROM
FISHERISCPBELLCORECOM
GREG
FISHER
THE
MOST
SERIOUS
PROBLEM
I
HAVE
IDENTIFIED
HAS
NOT
BEEN
INCORPORATED
THIS
PROBLEM
OCCURS
WHEN
THE
TABLE
WIDGETS
GEOMETRYMANAGER
IS
INVOKED
BY
A
CHILD
THIS
WILL
WORK
CORRECTLY
IF
THE
TABLE
WIDGETS
PARENT
COMPLIES
WITH
THE
XT
PROTOCOLS
HOWEVER
IF
THEY
DO
NOT
AS
IS
THE
CASE
FOR
SOME
MOTIF
WIDGETS
AND
THEY
IGNORE
XTCWQUERYONLY
THEN
THE
SIZING
WILL
BE
INCORRECT
IN
ORDER
TO
SEE
THIS
PROBLEM
THE
FOLLOWING
EVENTS
MUST
HAPPEN
A
CHILD
OF
THE
TABLE
WIDGET
MUST
REQUEST
A
NEW
SIZE
THE
TABLE
WIDGET
MUST
QUERY
ITS
PARENT
FOR
A
NEW
SIZE
HAVING
SET
XTCWQUERYONLY
THE
PARENT
MUST
IGNORE
THE
XTCWQUERYONLY
BIT
AND
RESIZE
THE
TABLE
WIDGET
AS
PART
OF
THE
RESIZE
XMPTABLEFORGETPROPOSEDLAYOUT
IS
CALLED
THIS
WILL
SET
TWTABLECURRENTCOLS
AND
TWTABLECURRENTROWS
TO
ZERO
THE
TABLE
WILL
CONTINUE
SETTING
UP
THE
NEW
SIZE
WORKING
UNDER
THE
ASSUMPTION
THAT
IT
IS
WORKING
WITH
A
PROPOSED
AND
NOT
ACTUAL
LAYOUT
AT
THE
END
IT
WILL
CALL
XMPTABLESAVEPROPOSEDLAYOUT
THIS
WILL
SAVE
TWTABLECOLS
AND
TWTABLEROWS
AND
RESTORE
THEIR
VALUES
FROM
TWTABLECURRENTCOLS
AND
TWTABLECURRENTROWS
HOWEVER
THESE
HAVE
ALREADY
BEEN
SET
TO
ZERO
SINCE
THE
TABLE
WIDGET
HAS
ALREADY
BEEN
RESIZED
IT
WILL
NOT
NEED
A
SECOND
RESIZE
NEXT
ANOTHER
WIDGET
MANAGED
BY
SOME
ANCESTOR
OF
THE
TABLE
IS
RESIZED
THIS
RESULTS
IN
THE
PARENT
OF
THE
TABLE
REQUESTING
THE
TABLES
PREFERRED
SIZE
SINCE
TWTABLECOLS
AND
TWTABLEROWS
ARE
ZERO
THIS
WILL
RETURN
AS
THE
PREFERRED
SIZE
THE
PARENT
IS
VERY
LIKELY
TO
GRANT
THIS
REQUEST
RESULTING
IN
A
LOSS
OF
THE
WHOLE
TABLE
FROM
THE
DISPLAY
HE
ISOLATED
THE
PROBLEM
A
PROPOSED
A
WORKAROUND
WHICH
SEEMS
PRECISELY
CORRECT
HERE
IS
THE
NEW
IMPLEMENTATION
OF
XMPTABLENEWPROPOSEDLAYOUT
WHICH
WILL
BE
RELEASED
WITH
THE
NEXT
UPDATE
IN
WEEKS
XMPTABLEC
VOID
XMPTABLENEWPROPOSEDLAYOUT
TW
XMPTABLEWIDGET
TW
XMPTABLECONSIDERSAMESIZE
TW
XMPTABLEPROPOSEDCOLSANDROWS
TW
XMPTABLEQUERYPARENTFORRESIZE
TW
QUERY
ONLY
NO
RESIZE
SINCE
WE
ONLY
MADE
A
QUERY
WE
SHOULD
STILL
NEED
TO
CONTINUE
HOWEVER
MOTIF
IS
BROKEN
SO
THAT
WE
ACTUALLY
MAY
ALREADY
HAVE
BEEN
RESIZED
IN
THAT
CASE
THE
PROPOSED
LAYOUT
IS
ALREADY
FORGOTTEN
SO
WE
SHOULD
JUST
QUIETLY
EXIT
IF
TWTABLERESIZESTATUS
RSDUETOREQUEST
XMPTABLEMAKECOLSFITQUERYWIDTH
TW
XMPTABLEMAKEROWSFITQUERYHEIGHT
TW
XMPTABLEGETPROPOSEDCHILDSIZE
TW
XMPTABLESAVEPROPOSEDLAYOUT
TW
ELSE
THE
RESIZE
HAS
ALREADY
BEEN
DONE
OUR
PROPOSED
LAYOUT
WOULD
HAVE
BEEN
FORGOTTEN
IN
THE
PROCESS
THE
XPTABLE
THE
FIX
IS
IDENTICAL
EXCEPT
OF
COURSE
FOR
THE
NAMES
XPTABLEC
VOID
XPTABLENEWPROPOSEDLAYOUT
TW
XPTABLEWIDGET
TW
XPTABLECONSIDERSAMESIZE
TW
XPTABLEPROPOSEDCOLSANDROWS
TW
XPTABLEQUERYPARENTFORRESIZE
TW
QUERY
ONLY
NO
RESIZE
SINCE
WE
ONLY
MADE
A
QUERY
WE
SHOULD
STILL
NEED
TO
CONTINUE
HOWEVER
SOME
MANAGER
WIDGETS
ARE
BROKEN
SO
THAT
WE
ACTUALLY
MAY
ALREADY
HAVE
BEEN
RESIZED
IN
THAT
CASE
THE
PROPOSED
LAYOUT
IS
ALREADY
FORGOTTEN
SO
WE
SHOULD
JUST
QUIETLY
EXIT
IF
TWTABLERESIZESTATUS
RSDUETOREQUEST
XPTABLEMAKECOLSFITQUERYWIDTH
TW
XPTABLEMAKEROWSFITQUERYHEIGHT
TW
XPTABLEGETPROPOSEDCHILDSIZE
TW
XPTABLESAVEPROPOSEDLAYOUT
TW
ELSE
THE
RESIZE
HAS
ALREADY
BEEN
DONE
OUR
PROPOSED
LAYOUT
WOULD
HAVE
BEEN
FORGOTTEN
IN
THE
PROCESS
DAVID
SMYTH
DAVIDJPLDEVVAXJPLNASAGOV
SENIOR
SOFTWARE
ENGINEER
DO
NOT
USE
VMAIL
YET
CCCP
X
AND
OBJECT
GURU
OFFICE
JET
PROPULSION
LAB
MS
OAK
GROVE
DRIVE
PASADENA
CA
THAT
SUN
WINDOWS
THINGY
WHATS
IT
CALLED
YOU
KNOW
ITS
REALLY
AWFUL
X
MOTIF
THATS
IT
MOTIF
YUCK
